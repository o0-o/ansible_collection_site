{# vim: ts=2:sw=2:sts=2:et:ft=yaml.ansible

Generate the initial all.yml file with comment header documenting its
function.

#}
---
{{  ( default_comment_header | default()
      + "This file defines services (srv_def), and all site dictionaries named after each site's fully qualified domain name (replacing periods with underscores).

Other variables may be added here as well. While parts of this file are generated by Ansible, it will not overwrite the whole file after it has been created. However, it will add to it as sites are created.

See README.md for documentation:

github.com/o0-o/ansible_collection_site/tree/main/roles/inventory"
    )
    | wordwrap(70)
    | comment(  prefix=yaml_comment_prefix | default(),
                postfix=default_comment_postfix | default() ) }}
# Service Definitions

# BEGIN ANSIBLE MANAGED BLOCK: Service Definitions
srv_defs:
  {{  update_srv_defs
      | default(srv_defs)
      | to_nice_yaml(width=1023, indent=2)
      | indent(2)
      | trim }}
# END ANSIBLE MANAGED BLOCK: Service Definitions

# Sites

# BEGIN ANSIBLE MANAGED BLOCK: Site - {{site_uri}}
{{site_group}}:
  {{ site | to_nice_yaml(width=1023, indent=2) | indent(2) | trim }}
# END ANSIBLE MANAGED BLOCK: Site - {{site_uri}}

# Add custom variables below:
